<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boss Asset Mapping Verification</title>
    <link rel="stylesheet" href="../assets/styles.css">
    <style>
        body {
            background-color: #050505;
            color: #fff;
            font-family: 'Outfit', sans-serif;
            padding: 20px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .card {
            background: rgba(20, 20, 30, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            transition: transform 0.2s;
        }

        .card:hover {
            transform: translateY(-5px);
            border-color: var(--neon-blue);
        }

        .card img {
            width: 120px;
            height: 120px;
            object-fit: contain;
            margin-bottom: 10px;
        }

        .key {
            color: var(--neon-gold);
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .filename {
            color: #888;
            font-size: 0.8em;
            word-break: break-all;
        }

        h1 {
            color: var(--neon-blue);
            border-bottom: 1px solid #333;
            padding-bottom: 10px;
            margin-top: 40px;
        }

        .section-desc {
            color: #aaa;
            margin-bottom: 20px;
            font-style: italic;
        }
    </style>
</head>

<body>

    <h1>1. Active Mapping Dictionary</h1>
    <div class="section-desc">These are the keywords checking against player data. If a match is found, the image is
        used.</div>
    <div id="dictionary-grid" class="grid"></div>

    <h1>2. Simulation: Database Name Resolution</h1>
    <div class="section-desc">Testing how common "Real" database names resolve using the logic.</div>
    <div id="simulation-grid" class="grid"></div>

    <script src="../dashboard_logic.js"></script>
    <script>
        // Wait for script to load
        setTimeout(() => {
            const dictionaryGrid = document.getElementById('dictionary-grid');
            const simulationGrid = document.getElementById('simulation-grid');

            // 1. Render Dictionary
            if (typeof BOSS_ASSET_MAP !== 'undefined') {
                for (const [key, filename] of Object.entries(BOSS_ASSET_MAP)) {
                    if (!filename) continue; // Skip nulls (Wintertodt)
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.innerHTML = `
                        <div class="key">${key}</div>
                        <img src="../assets/${filename}" onerror="this.src='../assets/boss_pet_rock.png'">
                        <div class="filename">${filename}</div>
                    `;
                    dictionaryGrid.appendChild(card);
                }
            } else {
                dictionaryGrid.innerHTML = '<div style="color:red">Error: BOSS_ASSET_MAP not found in dashboard_logic.js</div>';
            }

            // 2. Render Simulation
            const testNames = [
                "The Whisperer", "Vardorvis", "Calvar'ion", "Calvarion",
                "Commander Zilyana", "K'ril Tsutsaroth", "Alchemical Hydra",
                "Tombs of Amascut", "Tombs of Amascut: Expert Mode",
                "Chambers of Xeric", "Challenge Mode: Chambers of Xeric",
                "Theatre of Blood", "Theatre of Blood: Hard Mode",
                "TzTok-Jad", "TzKal-Zuk", "Nex", "Corporeal Beast",
                "Phantom Muspah", "Duke Sucellus", "The Leviathan",
                "Scorpia", "Chaos Fanatic", "Crazy Archaeologist",
                "Deranged Archaeologist", "Dagannoth Prime", "Dagannoth Rex", "Dagannoth Supreme",
                "Giant Mole", "Kalphite Queen", "Sarachnis", "Zulrah", "Vorkath",
                "Grotesque Guardians", "Abyssal Sire", "Cerberus", "Thermonuclear Smoke Devil",
                "Kraken", "Barrows Chests", "Hespori", "Skotizo", "Obor", "Bryophyta",
                "Mimic", "The Gauntlet", "The Corrupted Gauntlet",
                "Scurrius", "The Hueycoatl", "Sol Heredit", "Moons of Peril",
                "Unknown Boss 123"
            ];

            if (typeof resolveBossImage !== 'undefined') {
                testNames.forEach(name => {
                    const resolved = resolveBossImage(name, null); // Simulate no provided image
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.innerHTML = `
                        <div class="key" style="color:var(--neon-green)">${name}</div>
                        <img src="../assets/${resolved}" onerror="this.src='../assets/boss_pet_rock.png'">
                        <div class="filename">${resolved}</div>
                    `;
                    simulationGrid.appendChild(card);
                });
            } else {
                simulationGrid.innerHTML = '<div style="color:red">Error: resolveBossImage not found in dashboard_logic.js</div>';
            }

        }, 500); // Small delay to ensure logic loads
    </script>
</body>

</html>